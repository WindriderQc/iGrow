<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Data Farming App">
    <meta name="author" content="SpecialBlend Production">
    <title>ðŸ’» Database Request ðŸ’»</title>
    <link rel="shortcut icon" href="/img/favicon2.ico" type="image/x-icon">
    
    <!-- jQuery first, then Popper.js, then Bootstrap JS & CSS-->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="  crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.bundle.js"></script>
    
    <!-- Custom fonts for this template-->
    <script src="https://kit.fontawesome.com/195e82b473.js" crossorigin="anonymous"></script>
    
    <!-- Custom styles for this template-->
    <link rel="stylesheet"   type="text/css"  href="css/sb-admin.css" >
        <link rel="stylesheet" href="/css/serverClientStyles.css">


    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/addons/p5.dom.min.js"></script>
       
    <script src="https://cdn.jsdelivr.net/npm/moment@latest/moment.min.js"></script>
    

</head>

<body class="fixed-nav sticky-footer bg-light sidenav-toggled" id="page-top">
  
<nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top" id="mainNav">    <%- include('partials/nav') %>  </nav>
    
<div class="content-wrapper">
<div class="container-fluid bg-3">  
         
        


    <header>
        <h1 class="title">ðŸ’» Server stats ðŸ’»</h1>
    </header>
    <select class="mx-2 form-control" id="collection_select" onchange=dbSelect.updateSelected()></select>
    <form> 
        <input type='number' id='skip_id' name="skip" value=0>
        <input type='number' id='limit_id' name="limit" value=10>
        <input type='text' id='sort_id' name = "sort" value="desc">
        <input type="hidden" id="collection_id" name="collection" value="">
        <input type='button'  class="btn btn-primary" value="Send Request" onclick=sendRequest()>
    </form>


    <main>
        <div class="error-message">   </div>
        <div class="boots">           </div>
        
        <div class="button-container">
        <p id="loadMore">Loading...</p>
        </div>
        <div class="loading">
        <img src="/img/loading.gif" alt="">
        </div>
    </main>

</div>
</div>

<script src="/js/databaseClient.js"></script>
<script>

let dbList = JSON.parse('<%- collectionList %>')
let colList = []

dbList.forEach((db) => {
    colList.push(db.name)
})

let selectedDb = colList[0]  // select first collection of array by default
console.log({colList, selectedDb})


let dbSelect = new DBSelecter(colList, selectedDb,  "collection_select")
listAll(selectedDb, true)


//  Button activated update - collection list display upon query params in gui
function sendRequest() {
    listAll(dbSelect.selectedCollection, true)
}

</script>


</body>
</html>
